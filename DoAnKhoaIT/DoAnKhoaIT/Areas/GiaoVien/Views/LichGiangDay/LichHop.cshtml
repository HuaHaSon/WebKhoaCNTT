@model Model.ViewModel.LichGiaoVienModel
@{
    ViewBag.Title = "LichHop";
    Layout = "~/Areas/GiaoVien/Views/Shared/_LayoutGV.cshtml";
}

@section jsFooter{
<script>
    $(document).ready(function () {
        $("#Tuan").val(@ViewBag.chon); 
    });

    $("#Tuan").on("change", function () {
        var e = document.getElementById("Tuan");
        var text = e.options[e.selectedIndex].text;
        var ngay = text.split(": ");
        location.href = 'LichHop?mact='+ '@ViewBag.lich' + '&ngay=' + ngay[1];
    });

</script>   
}

<body>
    <div id="content">

        <div class="container">

            <div class="col-sm-12" style="padding-left:0px; padding-right:0px">
                <ul class="breadcrumb">

                    <li>
                        @Html.ActionLink("Trang chủ", "IndexGV", "Home")
                    </li>
                    <li>Lịch họp</li>

                </ul>
            </div>
            <div class="col-sm-12" style="padding-bottom:10px">
                <table align="center" border="0" cellpadding="0" cellspacing="3" style="font-family: Arial; width: 100%;">
                    <tbody>
                        <tr height="30px">
                            <td align="center">
                                @if (ViewBag.lich == "CTGV1")
                                {
                                    <h3 class="text-info"><strong>LỊCH HỌP TUẦN</strong></h3>
                                }
                                else
                                {
                                    <h3 class="text-info"><strong>LỊCH CÔNG TÁC TUẦN</strong></h3>
                                }

                            </td>
                        </tr>
                        <tr height="20px">
                            <td align="right">
                                Năm học :
                                <select name="Namhoc" id="Namhoc" style="width:100px;">
                                    <option value="16">2016 - 2017</option> 
                                    <option value="17">2017 - 2018</option>
                                    <option selected="selected" value="18">2018 - 2019</option>

                                </select>
                            </td> @* Năm học *@
                        </tr>
                        <tr height="20px">
                            <td align="center">
                                Tuần :
                                <select name="Tuan" id="Tuan" style="width:200px;">
                                    <option value="1801">Tuần thứ 1: 06/08/2018</option>
                                    <option value="1802">Tuần thứ 2: 13/08/2018</option>
                                    <option value="1803">Tuần thứ 3: 20/08/2018</option>
                                    <option value="1804">Tuần thứ 4: 27/08/2018</option>
                                    <option value="1805">Tuần thứ 5: 03/09/2018</option>
                                    <option value="1806">Tuần thứ 6: 10/09/2018</option>
                                    <option value="1807">Tuần thứ 7: 17/09/2018</option>
                                    <option value="1808">Tuần thứ 8: 24/09/2018</option>
                                    <option value="1809">Tuần thứ 9: 01/10/2018</option>
                                    <option value="1810">Tuần thứ 10: 08/10/2018</option>
                                    <option value="1811">Tuần thứ 11: 15/10/2018</option>
                                    <option value="1812">Tuần thứ 12: 22/10/2018</option>
                                    <option value="1813">Tuần thứ 13: 29/10/2018</option>
                                    <option value="1814">Tuần thứ 14: 05/11/2018</option>
                                    <option value="1815">Tuần thứ 15: 12/11/2018</option>
                                    <option value="1816">Tuần thứ 16: 19/11/2018</option>
                                    <option value="1817">Tuần thứ 17: 26/11/2018</option>
                                    <option value="1818">Tuần thứ 18: 03/12/2018</option>
                                    <option value="1819">Tuần thứ 19: 10/12/2018</option>

                                </select>
                            </td> @* Tuần *@
                        </tr>
                        <tr height="10px">
                            <td align="center"></td>
                        </tr>
                        <tr>
                            <tbody align="left">
                                @*<div class="wd-content-detail">*@
                                    <table align="center" border="1" bordercolor="#000000" cellpadding="4" cellspacing="0" width="100%">
                                        <tbody>
                                            <tr>
                                                <td width="8%"><p align="center"><b>THỨ/NGÀY</b></p></td>
                                                <td width="8%"><p align="center"><b>THỜI GIAN</b></p></td>
                                                <td width="25%"><p align="center"><b>NỘI DUNG</b></p></td>
                                                <td width="30%"><p align="center"><b>THÀNH PHẦN</b></p></td>
                                                <td width="12%"><p align="center"><b>ĐỊA ĐIỂM</b></p></td>
                                                <td width="12%"><p align="center"><b>CHỦ TRÌ</b></p></td>
                                                <td width="5%"><p align="center"><b>BỔ SUNG</b></p></td>
                                            </tr>
                                            @{
                                                int d = 2;
                                                DateTime ngay = Model.ngay;
                                            }
                                            @foreach (var item in Model.listchitietcongtac)
                                            {
                                                int i = 1;

                                                if (item.Count() == 0)
                                                {
                                                    <tr>
                                                        <td rowspan="1">
                                                            @{
                                                                if (d != 8)
                                                                {
                                                                    <p align="center">  Thứ @d </p>
                                                                    <p align="center">@ngay.ToString("dd/MM/yyyy")</p>
                                                                }
                                                                else
                                                                {
                                                                    <p align="center"> Chủ nhật </p>
                                                                    <p align="center">@ngay.ToString("dd/MM/yyyy")</p>
                                                                }
                                                            }
                                                        </td>
                                                        <td><p align="center"><b></b></p></td>
                                                        <td style="padding-left:5px"><p align="left"></p><p align="left"></p><p></p></td>
                                                        <td style="padding-left:5px"><p align="left"></p><p align="left"></p><p></p></td>
                                                        <td style="padding-left:5px"><p align="left"></p><p align="left"></p><p></p></td>
                                                        <td style="padding-left:5px"><p align="center"><b></b></p><p align="left"><b></b></p><p></p></td>
                                                        <td><p align="center">&nbsp;</p></td>
                                                    </tr>
                                                }

                                                ngay = ngay.AddDays(1);

                                                foreach (var t in item)
                                                {

                                                    if (i == 1)
                                                    {
                                                        <tr>
                                                            <td rowspan=@item.Count()>
                                                                @{ if (d != 8)
                                                                    {
                                                                        <p align="center">  Thứ @d </p>
                                                                    }
                                                                    else
                                                                    {
                                                                        <p align="center"> Chủ nhật </p>
                                                                    }
                                                                }
                                                                <p align="center">@t.NgayCT.Value.ToString("dd/MM/yyyy")</p>
                                                            </td>
                                                            <td><p align="center"><b>@t.NgayCT.Value.ToString("HH:mm")</b></p></td>
                                                            <td style="padding-left:5px"><p align="left"></p><p align="left">@Html.Raw(@t.Noidung)</p><p></p></td>
                                                            <td style="padding-left:5px"><p align="left"></p><p align="left">@Html.Raw(@t.Thanhphan)</p><p></p></td>
                                                            <td style="padding-left:5px"><p align="left"></p><p align="left">@t.Diadiem</p><p></p></td>
                                                            <td style="padding-left:5px"><p align="center"><b></b></p><p align="left"><b>@t.Chutri</b></p><p></p></td>
                                                            <td><p align="center">&nbsp;</p></td>
                                                        </tr>
                                                    }
                                                    else
                                                    {
                                                        <tr>
                                                            <td><p align="center"><b>@t.NgayCT.Value.ToString("HH:mm")</b></p></td>
                                                            <td style="padding-left:5px"><p align="left"></p><p align="left">@Html.Raw(@t.Noidung)</p><p></p></td>
                                                            <td style="padding-left:5px"><p align="left"></p><p align="left">@Html.Raw(@t.Thanhphan)</p><p></p></td>
                                                            <td style="padding-left:5px"><p align="left"></p><p align="left">@t.Diadiem</p><p></p></td>
                                                            <td style="padding-left:5px"><p align="center"><b></b></p><p align="left"><b>@t.Chutri</b></p><p></p></td>
                                                            <td><p align="center">&nbsp;</p></td>
                                                        </tr>
                                                    }
                                                    ++i;

                                                }
                                                ++d;
                                            }

                                        </tbody>
                                    </table>
                                
                                @*</div>*@
                            </tbody>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</body>
<style>
    .post {
        background: #f5f5f5;
        margin: 0 0 30px;
        border: solid 1px #e6e6e6;
        box-sizing: border-box;
        padding: 20px;
    }
    .td {
        padding:1px;
    }
</style>




